# Configuration for Brain Tumor dataset (QUBIQ Challenge)
# This dataset contains four-channel MRI for brain tumor segmentation
# Has 3 tasks with 3 expert annotations each

dataset:
  name: "brain-tumor"
  description: "Four-channel MRI for brain tumor segmentation"
  modality: "MRI"
  num_tasks: 3  # Three different segmentation tasks
  task_id: 1  # Set to 1, 2, or 3 for different tasks
  num_experts: 3  # Three expert annotations per task
  num_channels: 4  # Multi-sequence MRI (T1, T1ce, T2, FLAIR)

data:
  # Update these paths to your data location
  train_dir: "data/brain-tumor/training"
  val_dir: "data/brain-tumor/validation"
  test_dir: "data/brain-tumor/test"

  # Data preprocessing
  image_size: 256
  use_intensity_windowing: false  # Not needed for MRI
  normalization_method: "min-max"
  intensity_range: [0.0, 1.0]

model:
  architecture: "UNetDeepLSTM"  # LSTM works well for multi-channel input
  base_filters: 16
  use_batch_norm: true
  use_dropout: true
  dropout_rate: 0.5
  output_activation: "sigmoid"

training:
  batch_size: 1
  epochs: 500
  learning_rate: 0.0001
  loss_function: "dice_loss"

  # Metrics to track
  metrics:
    - "dice_coefficient"
    - "precision"
    - "recall"

  # Data augmentation
  augmentation:
    enabled: true
    rotation_range: 10.0
    width_shift_range: 0.1
    height_shift_range: 0.1
    horizontal_flip: true
    vertical_flip: false
    zoom_range: null

  # Callbacks
  callbacks:
    early_stopping:
      enabled: true
      patience: 20
      monitor: "val_loss"

    reduce_lr:
      enabled: true
      factor: 0.5
      patience: 10
      min_lr: 1e-7

    checkpoint:
      enabled: true
      save_best_only: true
      monitor: "val_loss"

evaluation:
  # Threshold values for evaluation
  thresholds: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]

  # Multi-expert ensemble evaluation
  ensemble_method: "mean"

output:
  model_dir: "models/brain-tumor"
  checkpoint_dir: "checkpoints/brain-tumor"
  log_dir: "logs/brain-tumor"
  results_dir: "results/brain-tumor"
